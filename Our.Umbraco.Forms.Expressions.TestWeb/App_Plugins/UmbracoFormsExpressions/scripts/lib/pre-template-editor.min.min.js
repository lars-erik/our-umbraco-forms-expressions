(function(){"use strict";function n(n,t){function r(t,r,u,f){var s=n.ace||{},o=angular.extend({},s,t.$eval(u.umbAceEditor)),e=window.ace.edit(r[0]),c;e.$blockScrolling=Infinity;var h=e.getSession(),l,a,v=function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);if(angular.isDefined(n))if(angular.isFunction(n))n(t);else throw new Error("ui-ace use a function as callback.");},y={onChange:function(n){return function(i){var r=h.getValue();!f||r===f.$viewValue||t.$$phase||t.$root.$$phase||f.$setViewValue(r);v(n,i,e)}},onBlur:function(n){return function(){v(n,e)}}};u.$observe("readonly",function(n){e.setReadOnly(!!n||n==="")});f&&(f.$formatters.push(function(n){if(angular.isUndefined(n)||n===null)return"";if(angular.isObject(n)||angular.isArray(n))throw new Error("ui-ace cannot use an object or an array as a model");return n}),f.$render=function(){h.setValue(f.$viewValue)});c=function(n,r){if(n!==r){o=angular.extend({},s,t.$eval(u.umbAceEditor));o.callbacks=[o.onLoad];o.onLoad!==s.onLoad&&o.callbacks.unshift(s.onLoad);h.removeListener("change",l);l=y.onChange(o.onChange);h.on("change",l);e.removeListener("blur",a);a=y.onBlur(o.onBlur);e.on("blur",a);i(e,h,o)}};t.$watch(u.umbAceEditor,c,!0);c(s);r.on("$destroy",function(){e.session.$stopWorker();e.destroy()});t.$watch(function(){return[r[0].offsetWidth,r[0].offsetHeight]},function(){e.resize();e.renderer.updateFull()},!0);t.editor=e}function u(n,i,u,f){t.load(["lib/ace-builds/src-min-noconflict/ace.js","lib/ace-builds/src-min-noconflict/ext-language_tools.js","../Editor/Scripts/mode-forms.js"]).then(function(){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");else r(n,i,u,f)})}var i;return angular.isUndefined(window.ace),i=function(n,t,i){var f,r,u;if(angular.isDefined(i.workerPath)&&(f=window.ace.require("ace/config"),f.set("workerPath",i.workerPath)),angular.isDefined(i.require)&&i.require.forEach(function(n){window.ace.require(n)}),angular.isDefined(i.showGutter)&&n.renderer.setShowGutter(i.showGutter),angular.isDefined(i.useWrapMode)&&t.setUseWrapMode(i.useWrapMode),angular.isDefined(i.showInvisibles)&&n.renderer.setShowInvisibles(i.showInvisibles),angular.isDefined(i.showIndentGuides)&&n.renderer.setDisplayIndentGuides(i.showIndentGuides),angular.isDefined(i.useSoftTabs)&&t.setUseSoftTabs(i.useSoftTabs),angular.isDefined(i.showPrintMargin)&&n.setShowPrintMargin(i.showPrintMargin),angular.isDefined(i.disableSearch)&&i.disableSearch&&n.commands.addCommands([{name:"unfind",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(){return!1},readOnly:!0}]),angular.isString(i.theme)&&n.setTheme("ace/theme/"+i.theme),angular.isString(i.mode)&&t.setMode("ace/mode/"+i.mode),angular.isDefined(i.firstLineNumber)&&(angular.isNumber(i.firstLineNumber)?t.setOption("firstLineNumber",i.firstLineNumber):angular.isFunction(i.firstLineNumber)&&t.setOption("firstLineNumber",i.firstLineNumber())),angular.isDefined(i.advanced))for(r in i.advanced)u={name:r,value:i.advanced[r]},n.setOption(u.name,u.value);if(angular.isDefined(i.rendererOptions))for(r in i.rendererOptions)u={name:r,value:i.rendererOptions[r]},n.renderer.setOption(u.name,u.value);angular.forEach(i.callbacks,function(t){angular.isFunction(t)&&t(n)})},{restrict:"EA",require:"?ngModel",link:u}}angular.module("umbraco.directives").constant("calcAceEditorConfig",{}).directive("calcAceEditor",["calcAceEditorConfig","assetsService",n])})(),function(){function o(r){var u=t;r&&(t[r]||(t[r]={}),u=t[r]);u.define&&u.define.packaged||(n.original=u.define,u.define=n,u.define.packaged=!0);u.require&&u.require.packaged||(i.original=u.require,u.require=i,u.require.packaged=!0)}var u="",t=function(){return this}(),n;if(t||typeof window=="undefined"||(t=window),u||typeof requirejs=="undefined"){n=function(t,i,r){if(typeof t!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(r=i);n.modules[t]||(n.payloads[t]=r,n.modules[t]=null)};n.modules={};n.payloads={};var f=function(n,t,r){var f,o,u,h,s;if(typeof t=="string"){if(f=e(n,t),f!=undefined)return r&&r(),f}else if(Object.prototype.toString.call(t)==="[object Array]"){for(o=[],u=0,h=t.length;u<h;++u){if(s=e(n,t[u]),s==undefined&&i.original)return;o.push(s)}return r&&r.apply(null,o)||!0}},i=function(n,t){var r=f("",n,t);return r==undefined&&i.original?i.original.apply(this,arguments):r},r=function(n,t){var i,u,f;if(t.indexOf("!")!==-1)return i=t.split("!"),r(n,i[0])+"!"+r(n,i[1]);if(t.charAt(0)==".")for(u=n.split("/").slice(0,-1).join("/"),t=u+"/"+t;t.indexOf(".")!==-1&&f!=t;)f=t,t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"");return t},e=function(t,i){var u;if(i=r(t,i),u=n.modules[i],!u){if(u=n.payloads[i],typeof u=="function"){var e={},o={id:i,uri:"",exports:e,packaged:!0},s=function(n,t){return f(i,n,t)},h=u(s,e,o);e=h||o.exports;n.modules[i]=e;delete n.payloads[i]}u=n.modules[i]=e||u}return u};o(u)}}();