angular.module("ufx",[]);angular.module("umbraco").requires.push("ufx"),function(){"use strict";function n(){return{replace:!0,require:["^ngModel"],restrict:"E",template:'<select ng-options="field.id as field.caption for field in fields"><\/select>',link:function(n){n.fields=n.model.fields}}}angular.module("ufx").directive("ufxField",[n])}(),function(){angular.module("ufx").controller("ufx.program.controller",["$scope","$http","umbRequestHelper",function(n,t,i){function r(n,t){return t.value.toLowerCase()==="["+n.name.toLowerCase()+"]"}function f(n){for(var f=n.session.getLength(),i,u=[],t,r=0;r<f;r++)for(i=n.session.getTokens(r),t=0;t<i.length;t++)i[t].type==="support"&&u.push(i[t]);return u}function e(t){for(var u,f,i=0;i<t.length;i++){for(f=-1,u=0;u<n.fields.length;u++)if(r(n.fields[u],t[i])){f=u;break}f===-1&&n.fields.push({name:t[i].value.substring(1,t[i].value.length-1),value:0})}}function o(t){for(var u,f,i=n.fields.length-1;i>=0;i--){for(f=-1,u=0;u<t.length;u++)if(r(n.fields[i],t[u])){f=i;break}f===-1&&n.fields.splice(i,1)}}function s(n){var i=n[1],t=f(i);t.length!==0&&(e(t),o(t))}var u=i.getApiUrl("ufx-program-evaluator","Run");n.run=function(){for(var r={},i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].value;t.post(u,{Program:n.setting.value,Values:r}).then(function(t){n.result=t.data;n.hasResult=t.data.Errors===null})};n.toggleFullScreen=function(){n.fullScreen=!0};n.closeFullScreen=function(){n.fullScreen=!1;n.$digest()};n.fullScreen=!1;n.fields=[];n.result={};n.hasResult=!1;n.aceOpts={mode:"forms",theme:"razor-chrome",onChange:s}}])}();define("ace/mode/forms_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(n,t){"use strict";var r=n("../lib/oop"),u=n("./text_highlight_rules").TextHighlightRules,i=function(){var n=this.createKeywordMapper({"support.function":"ceiling|floor|abs"},"variable.other",!0);this.$rules={start:[{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"support",regex:"\\[[^\\]]+\\]"},{token:n,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\/|\\*|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]};this.normalizeRules()};r.inherits(i,u);t.FormsHighlightRules=i});define("ace/mode/forms",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/forms_highlight_rules"],function(n,t){var r=n("../lib/oop"),u=n("./text").Mode,f=n("./forms_highlight_rules").FormsHighlightRules,i=function(){this.HighlightRules=f};r.inherits(i,u),function(){this.lineCommentStart="#";this.$id="ace/mode/forms";this.getNextLineIndent=function(n,t){return this.$getIndent(t)}}.call(i.prototype);t.Mode=i});